{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst startBtn = document.querySelector('button[data-start]');\nconst inputEl = document.querySelector('#datetime-picker');\nconst daysSpan = document.querySelector('span[data-days]');\nconst hoursSpan = document.querySelector('span[data-hours]');\nconst minutesSpan = document.querySelector('span[data-minutes]');\nconst secondsSpan = document.querySelector('span[data-seconds]');\n\nstartBtn.disabled = true;\n\nclass Timer {\n  constructor() {\n    this.isActive = false;\n  }\n\n  start(targetTime) {\n    if (this.isActive) {\n      return;\n    }\n\n    this.isActive = true;\n    startBtn.disabled = true;\n    inputEl.disabled = true;\n\n    const intervalId = setInterval(() => {\n      const currentTime = Date.now();\n      const deltaTime = targetTime - currentTime;\n      const time = this.getTimeComponent(deltaTime);\n      this.updateTime(time);\n      if (deltaTime < 1000) {\n        clearInterval(intervalId);\n        inputEl.disabled = false;\n        this.isActive = false;\n        const time = this.getTimeComponent(0);\n        this.updateTime(time);\n      }\n      console.log(time);\n    }, 1000);\n  }\n\n  getTimeComponent(deltaInMs) {\n    const ms = deltaInMs % 1000;\n    const totalSeconds = (deltaInMs - ms) / 1000;\n\n    const seconds = totalSeconds % 60;\n    const totalMinutes = (totalSeconds - seconds) / 60;\n\n    const minutes = totalMinutes % 60;\n    const totalHours = (totalMinutes - minutes) / 60;\n\n    const hours = totalHours % 24;\n    const totalDays = (totalHours - hours) / 24;\n\n    return {\n      hours: String(hours).padStart(2, '0'),\n      minutes: String(minutes).padStart(2, '0'),\n      seconds: String(seconds).padStart(2, '0'),\n      totalDays: String(totalDays).padStart(2, '0'),\n    };\n  }\n\n  updateTime({ totalDays, hours, minutes, seconds }) {\n    daysSpan.textContent = `${totalDays}`;\n    hoursSpan.textContent = `${hours}`;\n    minutesSpan.textContent = `${minutes}`;\n    secondsSpan.textContent = `${seconds}`;\n  }\n}\n\nconst timer = new Timer();\nlet targetTime;\n\nstartBtn.addEventListener('click', () => timer.start(targetTime));\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n    targetTime = selectedDates[0].getTime();\n    if (targetTime <= Date.now()) {\n      startBtn.disabled = true;\n      iziToast.show({\n        message: 'Please choose a date in the future',\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n        iconUrl: './img/error.svg',\n        progressBarColor: '#B51B1B',\n        messageColor: '#fff',\n        messageSize: '16px',\n        messageLineHeight: '24px',\n      });\n    } else {\n      startBtn.disabled = false;\n    }\n  },\n};\n\nflatpickr('#datetime-picker', options);\n"],"names":["startBtn","inputEl","daysSpan","hoursSpan","minutesSpan","secondsSpan","Timer","targetTime","intervalId","currentTime","deltaTime","time","deltaInMs","ms","totalSeconds","seconds","totalMinutes","minutes","totalHours","hours","totalDays","timer","options","selectedDates","iziToast","flatpickr"],"mappings":"2GAMA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAU,SAAS,cAAc,kBAAkB,EACnDC,EAAW,SAAS,cAAc,iBAAiB,EACnDC,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAc,SAAS,cAAc,oBAAoB,EAE/DL,EAAS,SAAW,GAEpB,MAAMM,CAAM,CACV,aAAc,CACZ,KAAK,SAAW,EACjB,CAED,MAAMC,EAAY,CAChB,GAAI,KAAK,SACP,OAGF,KAAK,SAAW,GAChBP,EAAS,SAAW,GACpBC,EAAQ,SAAW,GAEnB,MAAMO,EAAa,YAAY,IAAM,CACnC,MAAMC,EAAc,KAAK,MACnBC,EAAYH,EAAaE,EACzBE,EAAO,KAAK,iBAAiBD,CAAS,EAE5C,GADA,KAAK,WAAWC,CAAI,EAChBD,EAAY,IAAM,CACpB,cAAcF,CAAU,EACxBP,EAAQ,SAAW,GACnB,KAAK,SAAW,GAChB,MAAMU,EAAO,KAAK,iBAAiB,CAAC,EACpC,KAAK,WAAWA,CAAI,CACrB,CACD,QAAQ,IAAIA,CAAI,CACjB,EAAE,GAAI,CACR,CAED,iBAAiBC,EAAW,CAC1B,MAAMC,EAAKD,EAAY,IACjBE,GAAgBF,EAAYC,GAAM,IAElCE,EAAUD,EAAe,GACzBE,GAAgBF,EAAeC,GAAW,GAE1CE,EAAUD,EAAe,GACzBE,GAAcF,EAAeC,GAAW,GAExCE,EAAQD,EAAa,GACrBE,GAAaF,EAAaC,GAAS,GAEzC,MAAO,CACL,MAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EACpC,QAAS,OAAOF,CAAO,EAAE,SAAS,EAAG,GAAG,EACxC,QAAS,OAAOF,CAAO,EAAE,SAAS,EAAG,GAAG,EACxC,UAAW,OAAOK,CAAS,EAAE,SAAS,EAAG,GAAG,CAClD,CACG,CAED,WAAW,CAAE,UAAAA,EAAW,MAAAD,EAAO,QAAAF,EAAS,QAAAF,CAAO,EAAI,CACjDb,EAAS,YAAc,GAAGkB,CAAS,GACnCjB,EAAU,YAAc,GAAGgB,CAAK,GAChCf,EAAY,YAAc,GAAGa,CAAO,GACpCZ,EAAY,YAAc,GAAGU,CAAO,EACrC,CACH,CAEA,MAAMM,EAAQ,IAAIf,EAClB,IAAIC,EAEJP,EAAS,iBAAiB,QAAS,IAAMqB,EAAM,MAAMd,CAAU,CAAC,EAEhE,MAAMe,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAC5BhB,EAAagB,EAAc,CAAC,EAAE,QAAO,EACjChB,GAAc,KAAK,OACrBP,EAAS,SAAW,GACpBwB,EAAS,KAAK,CACZ,QAAS,qCACT,gBAAiB,UACjB,SAAU,WACV,QAAS,kBACT,iBAAkB,UAClB,aAAc,OACd,YAAa,OACb,kBAAmB,MAC3B,CAAO,GAEDxB,EAAS,SAAW,EAEvB,CACH,EAEAyB,EAAU,mBAAoBH,CAAO"}